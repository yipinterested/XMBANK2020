# 厦门国际银行金融数创杯2020小结
## 大赛简介
本次比赛由厦门国际银行联合厦门大学数据挖掘研究中心和DataCastle联手创办，比赛地址：https://www.dcjingsai.com/v2/cmptDetail.html?id=439
### 背景
随着科技发展，银行陆续打造了线上线下、丰富多样的客户触点，来满足客户日常业务办理、渠道交易等客户需求。面对着大量的客户，银行需要更全面、准确地洞察客户需求。在实际业务开展过程中，需要发掘客户流失情况，对客户的资金变动情况预判；提前/及时针对客户进行营销，减少银行资金流失。本次竞赛提供实际业务场景中的客户行为和资产信息为建模对象，一方面希望能借此展现各参赛选手的数据挖掘实战能力，另一方面需要选手在复赛中结合建模的结果提出相应的营销解决方案，充分体现数据分析的价值。
### 数据
本次比赛由的训练集为第三第四季度的用户数据，测试集为次年第一季度的用户数据。每个数据集包含了如下数据表：
  * aum数据：即用户的资产数据（定期活期理财基金等）
  
  ![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/aum.jpg)
  * 存款数据（存款产品和数量等）
  
  ![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/cunkuan.jpg)
  * 重大事件数据（开户贷款逾期等）
  
  ![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/big_event.jpg)
  * 用户行为数据（转出转入等）
  
  ![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/behavior.jpg)
  * 用户个人信息
  
  ![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/cust_info.jpg)
  

### 评分标准
本次任务为三分类任务，-1表示下降，0代表维稳，1代表上升，评估指标使用kappa值，这次比赛是我第一次接触到kappa值。

kappa的计算是基于混淆矩阵的，具体计算方法如下：
![image](https://github.com/yipinterested/XMBANK2020/blob/main/Image_folder/kappa.jpg)

## 探索性分析
本次比赛在EDA方面没有下什么功夫，只是大致看了一下数据的分布以及缺失值的情况，具体情况如下：
  * 数值型的数据基本上都是长尾数据，可以考虑分箱或者截断操作以增加鲁棒性
  * 数据中有一些变量的缺失值在80%以上甚至有将近全部缺失的变量，考虑删除
  * 测试集和训练集的分布没有发现较大的异常（存疑，后续在看大神开源复盘）
  
## 特征工程
本次的特征工程主要有以下尝试：

  * 围绕aum和存款数据作了统计，比如求和，求均值和标准差等
  
  * 在aum上做特征的交互来衍生变量，比如季度初和季度末余额做减法，不同变量之间的求和，求差和作比值等
  
  * 另外也对一些时间格式的变量做了处理，并且对特别长尾的数据做了截断
  
  * 对类别变量作了简单映射
  
  * 加入上季度的标签作为变量

  * 个人信息的拼接在验证集上的效果不好，遂放弃

  * 数据的分箱效果不稳定，也放弃
  
本次特征工程主要的问题：

  * 可能因为在特征工程上使用了比较暴力的衍生法，导致产生除了比较多没有什么用的变量，所以很快就找不到什么提升的空间了
  
  * 对于个人信息一侧的挖掘很少，可能是没有掌握处理个人信息的方法，这方面还是等开源复盘
  
  * 没有做特征筛选或者只是简单的基于重要性选择
  
## 建模
本次使用LGB模型，5折交叉检验，因为分数实在不高，也没有尝试模型融合了，意义不是很大

## 调参
使用Optuna 进行贝叶斯调参，结果调参后线下分数提高，但是线下反而降低了

## 总结
这是本人第一次打正式的比赛，比赛在12月10初赛结束，但是因为工作原因，最后半个月都没有什么时间去打比赛了（虽然花了时间也不一定有提高），只是草草用完三次机会，但最后提交B榜的日期我也忘了提交，所以我也不知道B榜使用的是哪次的提交结果。最终结果线上A榜143，B榜158，非常勉强的Top10%。

这次比赛有一点不是很能理解，就是我的线下结果有提高的时候，线上往往会下降，个人猜测可能是训练集和测试集的分布差异造成的，但是我又找不出来。

这次比赛认识到自己在特征工程上还是有比较大的欠缺，希望后续能参加更多比赛继续加强吧，同时期待更多关于这次比赛的开源。

PS:青禹大佬在这次比赛的开源在前期帮助我快速进入比赛状态，希望开源环境越来越好。 https://github.com/cXPromise/Datacasle_2020XM_Baseline/blob/main/2020XMBank_baseline.ipynb




